---
layout: default
---

<div class="home">
  {%- if page.title -%}
    <h1 class="page-heading">{{ page.title }}</h1>
  {%- endif -%}

  {{ content }}


  {% if site.paginate %}
    {% assign posts = paginator.posts | where: "layout","project" | sort: "relevance" | reverse %}
  {% else %}
    {% assign posts = site.posts | where: "layout","project" | sort: "relevance" | reverse %}
  {% endif %}


  {%- if posts.size > 0 -%}
    {%- if page.list_title -%}
      <h2 class="post-list-heading">{{ page.list_title }}</h2>
    {%- endif -%}
    {%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
    {%- assign visible_limit = 10 -%}
    <div class="grid-container">
      {%- for post in posts limit: visible_limit -%}
        <div class="grid-item" onclick="window.location = '{{ post.url | relative_url }}';">
          {%- if site.show_excerpts -%}
            {%- if post.image -%}
              <a class="grid-item-image" href="{{ post.url | relative_url }}"><img loading="lazy" src="{{ post.image }}" width="320" height="240"/></a>
            {%- endif -%}
            {%- if post.thumb -%}
              <a class="grid-item-image" href="{{ post.url | relative_url }}"><img loading="lazy" src="/media{{ post.permalink }}/{{ post.thumb }}" width="320" height="240"/></a>
            {%- endif -%}
          {%- endif -%}
          <div class="grid-item-body">
            <h3 class="grid-item-title">
              <a href="{{ post.url | relative_url }}">
                {{ post.title | escape }}
              </a>
            </h3>
            {%- if site.show_excerpts -%}
              {%- if post.description -%}
                <p class="grid-item-description">{{ post.description }}</p>
              {%- endif -%}
            {%- endif -%}
            <span class="grid-item-date">{{ post.date | date: date_format }}</span>
          </div>
        </div>
      {%- endfor -%}
    </div>

    {%- if posts.size > visible_limit -%}
      <div class="show-more-projects" style="text-align: center; margin: 30px 0;">
        <button onclick="document.getElementById('more-projects').style.display='grid'; this.parentElement.style.display='none';"
                style="background: none; color: var(--color-text-muted); border: none; padding: 8px 16px; cursor: pointer; font-size: 0.9em; font-family: inherit;">
          Show more projects &#x25BC;
        </button>
      </div>
      <div id="more-projects" class="grid-container" style="display: none; margin-top: 50px;">
        {%- for post in posts offset: visible_limit -%}
          <div class="grid-item" onclick="window.location = '{{ post.url | relative_url }}';">
            {%- if site.show_excerpts -%}
              {%- if post.image -%}
                <a class="grid-item-image" href="{{ post.url | relative_url }}"><img loading="lazy" src="{{ post.image }}" width="320" height="240"/></a>
              {%- endif -%}
              {%- if post.thumb -%}
                <a class="grid-item-image" href="{{ post.url | relative_url }}"><img loading="lazy" src="/media{{ post.permalink }}/{{ post.thumb }}" width="320" height="240"/></a>
              {%- endif -%}
            {%- endif -%}
            <div class="grid-item-body">
              <h3 class="grid-item-title">
                <a href="{{ post.url | relative_url }}">
                  {{ post.title | escape }}
                </a>
              </h3>
              {%- if site.show_excerpts -%}
                {%- if post.description -%}
                  <p class="grid-item-description">{{ post.description }}</p>
                {%- endif -%}
              {%- endif -%}
              <span class="grid-item-date">{{ post.date | date: date_format }}</span>
            </div>
          </div>
        {%- endfor -%}
      </div>
    {%- endif -%}

    {% if site.paginate %}
      <div class="pager">
        <ul class="pagination">
        {%- if paginator.previous_page %}
          <li><a href="{{ paginator.previous_page_path | relative_url }}" class="previous-page">{{ paginator.previous_page }}</a></li>
        {%- else %}
          <li><div class="pager-edge">•</div></li>
        {%- endif %}
          <li><div class="current-page">{{ paginator.page }}</div></li>
        {%- if paginator.next_page %}
          <li><a href="{{ paginator.next_page_path | relative_url }}" class="next-page">{{ paginator.next_page }}</a></li>
        {%- else %}
          <li><div class="pager-edge">•</div></li>
        {%- endif %}
        </ul>
      </div>
    {%- endif %}

  {%- endif -%}

  {% assign notes = site.posts | where: "layout","note" %}
  {%- if notes.size > 0 -%}
    <div class="home-notes-section">
      <h2 class="home-notes-heading"><a href="/notes/">Technical Notes</a></h2>
      <div class="notes-list">
        {%- for note in notes limit:5 -%}
          <a class="note-item" href="{{ note.permalink }}">
            <span class="note-item-title">{{ note.title }}</span>
            {%- if note.description %}
              <span class="note-item-desc">— {{ note.description }}</span>
            {%- endif %}
            <span class="note-item-date">{{ note.date | date: "%Y-%m-%d" }}</span>
          </a>
        {%- endfor -%}
      </div>
    </div>
  {%- endif -%}

</div>
